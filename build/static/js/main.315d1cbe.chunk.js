(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(9),i=n.n(s),r=(n(90),n(15)),c=n(12),l=n(157),m=n(3),u=Object(l.a)({customer:{display:"flex",flexDirection:"column",alignSelf:"flex-start",minWidth:"3.5rem",width:"fit-content",maxHeight:"max-content",padding:"0.5rem 0.5rem 0.25rem 0.5rem",margin:"0.6rem 0.6rem 0rem 0.6rem",wordBreak:"break-word",borderTopLeftRadius:"0.6rem",borderBottomRightRadius:"0.6rem",color:"white",backgroundColor:"#276678",animation:"$fadeIn .25s ease-in-out"},"@keyframes fadeIn":{"0%":{transform:"translateY(10px)"},"50%":{transform:"translateY(-10px)"},"100%":{transform:"translateY(0px)"}},operator:{display:"flex",flexDirection:"column",alignSelf:"flex-end",minWidth:"3.5rem",width:"fit-content",maxHeight:"max-content",padding:"0.5rem 0.5rem 0.25rem 0.5rem",margin:"0.6rem 0.6rem 0rem 0.6rem",wordBreak:"break-word",borderTopLeftRadius:"0.6rem",borderBottomRightRadius:"0.6rem",backgroundColor:"#f6f5f5",animation:"$fadeIn .25s ease-in-out"},message:{alignSelf:"flex-start",fontSize:"0.85rem"},time:{alignSelf:"flex-end",fontSize:"0.6rem",marginTop:"0.4rem",padding:0}}),d=function(e){var t=e.msg,n=e.sendBy,a=u();return Object(m.jsxs)("div",{className:"customer"===n?a.customer:a.operator,children:[Object(m.jsx)("div",{className:a.message,children:t.message}),Object(m.jsx)("div",{className:a.time,children:t.time})]})},g=Object(l.a)({root:{display:"flex",flexDirection:"column",paddingTop:"0.5rem",width:"100%",height:"70%",overflowY:"auto",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}}),b=function(e){var t=e.messages,n=(e.id,g()),o=Object(a.useRef)();return Object(a.useEffect)((function(){o.current.scrollTo(0,o.current.scrollHeight)}),[t]),Object(m.jsx)("div",{ref:o,className:n.root,children:t.map((function(e,t){return"agent"!==e.id?Object(m.jsx)(d,{msg:e,sendBy:"customer"},t):Object(m.jsx)(d,{msg:e,sendBy:"agent"},t)}))})},f=n(162),j=n(77),h=n.n(j),p=Object(l.a)({root:{position:"absolute",width:"10%",bottom:15,margin:"0.4rem 0.4rem",right:10},btn:{zIndex:1}}),O=function(){var e=p();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(f.a,{className:e.btn,type:"submit",size:"small",children:Object(m.jsx)(h.a,{})})})},x=n(161),w=n(78),v=n.n(w)()(window.origin),y=null,N=Object(l.a)({root:{display:"flex",alignItems:"center",width:"95%",height:"10%",backgroundColor:"#f6f5f5",borderRadius:"0.5rem",overflow:"auto",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},input:{width:"80%",height:"50%",padding:"10px"}}),S=function(e){var t=e.id,n=e.message,o=e.sendMessage,s=e.setMessageText,i=e.showTyping,r=(e.typing,N());Object(a.useEffect)((function(){v.on("typing",(function(e){i(e.state)}))}),[i]);return Object(m.jsxs)("form",{onKeyDown:function(e){return function(e){13===e.keyCode&&o(e)}(e)},onSubmit:o,className:r.root,children:[Object(m.jsx)(x.a,{className:r.input,value:n,onChange:s,onInput:function(){v.emit("typing",{state:!0,id:t})},onKeyUp:function(){window.clearTimeout(y),y=window.setTimeout((function(){v.emit("typing",{state:!1,id:t})}),1500)},autoComplete:"true",multiline:!0,autoFocus:!0,InputProps:{disableUnderline:!0}}),Object(m.jsx)(O,{})]})},k=n(79),T=n.n(k),I=Object(l.a)({root:{position:"absolute",right:20}}),C=function(){var e=I();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(f.a,{size:"small",children:Object(m.jsx)(T.a,{})})})},R=Object(l.a)({root:{display:"flex",alignItems:"center",paddingLeft:30,fontWeight:500,width:"70%"},agentAvailable:{width:"0.7em",height:"0.7em",borderRadius:"50%",backgroundColor:"#00FF00",margin:"0 .3em 0 -0.5em",transition:"0.1s ease-in-out 0.1s"},agentUnavailable:{width:"0.7em",height:"0.7em",borderRadius:"50%",backgroundColor:"red",margin:"0 .3em 0 -0.5em",transition:"0.1s ease-in-out 0.1s"}}),A=function(e){var t=e.agentName,n=e.setAgentName,o=R();return Object(a.useEffect)((function(){v.on("agent available",(function(e){n(e.name)}))})),Object(m.jsxs)("div",{className:o.root,children:[Object(m.jsx)("span",{className:"Agent name"!==t?o.agentAvailable:o.agentUnavailable}),Object(m.jsx)("span",{children:t})]})},D=Object(l.a)({root:{display:"flex",alignItems:"center",width:"100%",height:"10%",borderTopLeftRadius:"0.5rem",borderTopRightRadius:"0.5rem",backgroundColor:"#1687a7",color:"white"}}),B=function(e){var t=e.agentName,n=e.setAgentName,o=D(),s=Object(a.useContext)(K);return Object(m.jsxs)("div",{className:o.root,onClick:function(){return s.showDispatch("show")},children:[Object(m.jsx)(A,{agentName:t,setAgentName:n}),Object(m.jsx)(C,{})]})},E=Object(a.memo)(B),M=Object(l.a)({root:{alignItems:"center",display:"flex",height:"1rem"},type:{fontSize:"0.8rem",fontStyle:"oblique"}}),F=function(){var e=M();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)("span",{className:e.type,children:"...typing"})})},L=Object(l.a)({root:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"5%",textAlign:"center"}}),z=function(e){var t=e.typing,n=L();return Object(m.jsx)("div",{className:n.root,children:t?Object(m.jsx)(F,{}):null})},J=Object(a.memo)(z),P=n(80),U=n.n(P),W=Object(l.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",width:"270px",height:"450px",backgroundColor:"#d3e0ea",position:"absolute",bottom:30,right:50,borderRadius:"1em",animation:"$fadeIn 0.2s ease-out"},"@keyframes fadeIn":{"0%":{opacity:"0"},"50%":{opacity:"0.5"},"100%":{opacity:"1"}},icon:{position:"absolute",bottom:30,right:50},bubble:{width:"60px",height:"60px"}}),Y=function(e){var t=e.messages,n=e.message,o=e.id,s=e.showTyping,i=e.typing,r=e.sendMessage,c=e.setMessageText,l=e.agentName,u=e.setAgentName,d=W(),g=Object(a.useContext)(K);return g.showState?Object(m.jsxs)("div",{className:d.root,children:[Object(m.jsx)(E,{agentName:l,setAgentName:u}),Object(m.jsx)(b,{messages:t,id:o}),Object(m.jsx)(J,{typing:i}),Object(m.jsx)(S,{id:o,message:n,setMessageText:c,sendMessage:r,showTyping:s,typing:i})]}):Object(m.jsx)("div",{children:Object(m.jsx)(f.a,{onClick:function(){g.showDispatch("show")},className:d.icon,children:Object(m.jsx)(U.a,{className:d.bubble,color:"primary"})})})};var H=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),o=Object(c.a)(n,2),s=o[0],i=o[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]},$=n(163),K=o.a.createContext({}),q=function(e,t){switch(t){case"show":return!e;default:return e}},_=Object(l.a)({app:{width:"100%",height:"100%",position:"relative",backgroundImage:"URL('customer_support.jpg')",backgroundRepeat:"no-repeat",backgroundPosition:"left"}}),G=function(){var e=Object(a.useReducer)(q,false),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),i=Object(c.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(""),g=Object(c.a)(d,2),b=g[0],f=g[1],j=Object(a.useState)(!1),h=Object(c.a)(j,2),p=h[0],O=h[1],x=Object(a.useState)([]),w=Object(c.a)(x,2),y=w[0],N=w[1],S=H("messages",""),k=Object(c.a)(S,2),T=(k[0],k[1]),I=Object(a.useState)("Agent name"),C=Object(c.a)(I,2),R=C[0],A=C[1],D=_();return Object(a.useEffect)((function(){v.emit("join",b)}),[b]),Object(a.useEffect)((function(){f(Object($.a)()),v.on("chat message",(function(e){N((function(t){return[].concat(Object(r.a)(t),[e])}))}))}),[]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("messages")||"[]");e?N(Object(r.a)(e)):T(y)}),[]),Object(a.useEffect)((function(){T(y)}),[y]),Object(a.useEffect)((function(){setTimeout((function(){o("show")}),1e3)}),[]),Object(m.jsx)(K.Provider,{value:{showState:n,showDispatch:o},children:Object(m.jsx)("div",{className:D.app,children:Object(m.jsx)(Y,{sendMessage:function(e){e.preventDefault();var t=new Date;if(l){var n={message:l,id:b,toRoom:b,time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})};v.emit("chat message",n),u("")}},id:b,showTyping:O,setMessageText:function(e){u(e.target.value)},typing:p,messages:y,message:l,agentName:R,setAgentName:A})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),s(e),i(e)}))};i.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(G,{})}),document.getElementById("root")),Q()},90:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.315d1cbe.chunk.js.map